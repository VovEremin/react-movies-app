{"version":3,"sources":["components/Input/Input.module.scss","components/Form/Form.module.scss","components/Input/InputItem/InputItem.module.scss","components/Rating/RatingMenu/RatingMenu.module.scss","assets/img/chevron-down.svg","redux/types.js","components/Genre/GenreMenu/GenreMenu.js","redux/actions/infoActions.js","components/Genre/Genre.js","assets/img/emptyStar.png","assets/img/fullStar.png","components/Input/InputItem/InputItem.js","assets/img/halfStar.png","components/Input/Input.js","components/Rating/RatingMenu/RatingMenu.js","components/Rating/Rating.js","redux/selectors/filmsSelector.js","redux/selectors/infoSelector.js","api/api.js","redux/actions/filmsActions.js","components/Form/Form.js","helpers/debounce.js","App.js","redux/reducers/filmsReducer.js","redux/reducers/infoReducer.js","redux/store.js","index.js","components/Genre/Genre.module.scss","components/Genre/GenreMenu/GenreMenu.module.scss","components/Rating/Rating.module.scss"],"names":["module","exports","SET_FILMS","SET_IS_LOADED","SET_INPUT_VALUE","SET_GENRE","SET_RATING","array","GenreMenu","React","memo","genre","dispatch","useDispatch","selectGenre","type","payload","setGenre","className","styles","menu","checkbox","name","id","onChange","checked","includes","htmlFor","any","map","item","index","Genre","useState","genreVisibility","setGenreVisibility","ratingMenuRef","useRef","handleClickOutside","e","path","composedPath","current","useEffect","window","addEventListener","removeEventListener","ref","topSide","onClick","title","arrow","src","arrowIcon","alt","bottomSide","InputItem","rating","category","stars","Number","isInteger","concat","Array","fill","Math","trunc","star","fullStarIcon","emptyStarIcon","Input","resultFilms","placeholder","inputValue","films","isLoaded","filteredFilms","forEach","length","floor","push","input","value","target","list","text","key","RatingMenu","selectRating","setRating","_","Rating","ratingVisibility","setRatingVisibility","genreMenuRef","getFilms","state","getInfo","info","filmsAPI","axios","get","then","response","data","setIsLoaded","fetchFilms","Form","useSelector","generatedGenre","join","loadFilms","useCallback","func","wait","immediate","timeout","args","context","later","apply","callNow","clearTimeout","setTimeout","debounce","trim","wrapper","filters","App","initialState","rootReducer","combineReducers","action","newGenre","filter","newRating","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e3f0b84e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Input_input__3rPb3\",\"list\":\"Input_list__3uV5q\",\"text\":\"Input_text__3F8Z4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Form_wrapper__3iDbh\",\"filters\":\"Form_filters__1hV_i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"InputItem_item__1uU9C\",\"topSide\":\"InputItem_topSide__1-lZ3\",\"title\":\"InputItem_title__2pDAP\",\"genre\":\"InputItem_genre__2rNwU\",\"rating\":\"InputItem_rating__pZM8P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"RatingMenu_menu__3PoI1\",\"checkbox\":\"RatingMenu_checkbox__24zZ7\",\"any\":\"RatingMenu_any__1SiV3\",\"star\":\"RatingMenu_star__pH-RL\"};","export default __webpack_public_path__ + \"static/media/chevron-down.bb5b6ea0.svg\";","export const SET_FILMS = 'SET_FILMS'\nexport const SET_IS_LOADED = 'SET_IS_LOADED'\n\nexport const SET_INPUT_VALUE = 'SET_INPUT_VALUE'\nexport const SET_GENRE = 'SET_GENRE'\nexport const SET_RATING = 'SET_RATING'","import React from 'react'\nimport styles from './GenreMenu.module.scss'\nimport {useDispatch} from \"react-redux\";\nimport {setGenre} from \"../../../redux/actions/infoActions\";\n\nconst array = ['Action', 'Comedy', 'Drama', 'Thriller']\n\nexport const GenreMenu = React.memo(({genre}) => {\n\n    const dispatch = useDispatch()\n\n    const selectGenre = (genre) => {\n        dispatch(setGenre(genre))\n    }\n\n    return (\n        <div className={styles.menu}>\n            <div className={styles.checkbox}>\n                <input name='any' type=\"checkbox\" id='any' onChange={() => selectGenre('any')} checked={genre.includes('any')} />\n                <label htmlFor='any' className={styles.any}>Any genre</label>\n            </div>\n            {\n                array.map((item, index) => {\n                    return (\n                        <div className={styles.checkbox} key={index}>\n                            <input name={item} type=\"checkbox\" id={item} checked={genre.includes(item)} onChange={() => selectGenre(item)} />\n                            <label htmlFor={item} className={styles.genre}>{item}</label>\n                        </div>\n                    )\n                })\n            }\n        </div>\n    )\n})","import {SET_GENRE, SET_INPUT_VALUE, SET_RATING} from \"../types\";\n\nexport const setInputValue = (value) => ({\n    type: SET_INPUT_VALUE,\n    payload: value\n})\n\nexport const setGenre = (genre) => ({\n    type: SET_GENRE,\n    payload: genre\n})\n\nexport const setRating = (rating) => ({\n    type: SET_RATING,\n    payload: rating\n})","import styles from './Genre.module.scss'\nimport arrowIcon from '../../assets/img/chevron-down.svg'\nimport { GenreMenu } from './GenreMenu/GenreMenu'\nimport {useEffect, useRef, useState} from \"react\";\n\n\nexport const Genre = ({genre}) => {\n    const [genreVisibility, setGenreVisibility] = useState(false)\n\n    const ratingMenuRef = useRef(null)\n\n    const handleClickOutside = (e) => {\n        const path = e.path || (e.composedPath && e.composedPath())\n        if(!path.includes(ratingMenuRef.current)) {\n            setGenreVisibility(false)\n        }\n    }\n\n    const toggleVisibleMenu = () => {\n        setGenreVisibility(!genreVisibility)\n    }\n\n    useEffect(() => {\n        window.addEventListener('click', handleClickOutside)\n        return () => {\n            window.removeEventListener('click', handleClickOutside)\n        }\n    }, [])\n\n    return (\n        <div\n            className={styles.genre}\n            ref={ratingMenuRef}\n        >\n            <div\n                className={styles.topSide}\n                onClick={toggleVisibleMenu}\n            >\n                <span className={styles.title}>Genre</span>\n                <span className={styles.arrow}>\n                    <img src={arrowIcon} alt='arrow' />\n                </span>\n            </div>\n            { genreVisibility &&\n                <div className={styles.bottomSide}>\n                    <GenreMenu genre={genre} />\n                </div>\n            }\n        </div>\n    )\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAXgAAAF4B+NkP+QAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFCSURBVDiNldKxSpxBFMXx3823YfEFFAVNEU0gWG6tWPkAeQc724BpwhYhlaS1tLEKtoudhc8gCLpKmg2IVcRCEpgU3pUv7OySDEwx9/7P4R7mRilF7UTES/Tz+amU8qvGdarqp/MZ2y3uQ5UqpUxcLOIem3nvsVhlpxjs47T1PsV+je1k3i5eYxVr2MH71qBfcBwRI1ziCsNSyiPs4QG/McQJ+pWp+tkbJvuQWnf4iLnaiFMizqXmDg5wgaX/MFhKzQE0OMpsy/8gXk72CM242OAQ11iYIV5I5hDNX9+YJj+xNcNgK5lmYg/wCgXzMwzmk1kZ1160/vodRqWU23EhIjYiYqO1tbcYJQsTBucp7EXEAAMMImIQEb3kzqcZjLAeEd9whu9462k7b3CWvXX8eFa18nWxi694U8m/lr1ddMf1Pz91WKppe+4KAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEfSURBVHgBpVMxboNAENwDAaJAIRIISn4QnoB/kJTpkjJd8gLXqZIfJPlBfmCegDuX7gGZggYJgWexQMgG6YxHgl0tO8PucAiage/7Qdu2G86bpnlK0zSZ6lPmBED+QQj4UhTla65vUsBxnAghGpUiTBRJC6iquqbLidZTvYJvruuGCCFGfUCjLYR4oWn84/kWMYEvRZZlsfA8j/d7p2X4ZoGWbgB7ENNCYJ1fYQO6rm+wd3glP6mqatWZuECkIxeA6CssYhjGQYYN8j2TOR/OgaZpAUnCNM27Ph8EMH5AkqjrenUhAEibOH7ZeAJ73IRPxDt+oP6KuD8TGHrVPrEsa4fwCCLhSH/CqOc8z+OyLBP484erotPfWUDgDfXOxCMsi2PnXNvAFAAAAABJRU5ErkJggg==\"","import styles from './InputItem.module.scss'\nimport emptyStarIcon from '../../../assets/img/emptyStar.png'\nimport fullStarIcon from '../../../assets/img/fullStar.png'\nimport halfStarIcon from '../../../assets/img/halfStar.png'\n\nexport const InputItem = ({title, rating, category}) => {\n    let stars = []\n    if(Number.isInteger(+rating)) {\n        stars = stars.concat(Array(+rating).fill('+'), Array(10-(+rating)).fill('-'))\n    } else {\n        stars = stars.concat(Array(Math.trunc(+rating)).fill('+'), Array(1).fill('='), Array(9-(Math.trunc(+rating))).fill('-'))\n    }\n\n    return (\n        <div className={styles.item}>\n            <div className={styles.topSide}>\n                <p className={styles.title}>{title}</p>\n                <span className={styles.genre}>{category}</span>\n            </div>\n            <div className={styles.rating}>\n                {\n                    stars.map((item, index) => {\n                        let star\n                        if(item === '+') {\n                            star = fullStarIcon\n                        } else if (item === '-') {\n                            star = emptyStarIcon\n                        } else {\n                            star = halfStarIcon\n                        }\n                        return (\n                            <div className={styles.star} key={index}>\n                                <img src={star} alt={item} />\n                            </div>\n                        )\n                    })\n                }\n            </div>\n        </div>\n    )\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAQCAYAAADwMZRfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFsSURBVHgBlVM9i8JAEH0XtLHyB9gI2lnY2/gH7AURaysFe79AGxWtrdTGn6G9hTZWFipJEdIkEAiBfOztLpdwuSTm8iBkdvbN25mdWZAEtNvtJAoR8AG73Q6iKGK/33+iIVbEsixMJhPU63WcTifYtp1eZD6f4/V6cXs0GmE2myGVCAterVb+ulgswnVdaJoWKZIxDAOPxwOXywX3+x3n85mL6LoeIHa7XYzHY+RyOQiCgGq1ilKpxP/o9/uEcmI/GhjZkev1StbrNRkMBkSgBjqdDtIin8/z8pbLJT2Kgt48qdVq/87k+XySZrNJHMfha3gbqqoSWl+iiCRJpNFocH5o2Fh6x+MxsQw2eJvNhvM9BFpsmmaiSKFQCPkCIu/3G0moVCq43W7xIt6Eeshms1AUBYvFwt9jmTDfb2SiRFi9vV6PzRC3mX+73UKWZQyHw1DGX7xFP2i1WiiXy37wXzCxw+HAH+N0OvX938WdRpiUGL7LAAAAAElFTkSuQmCC\"","import styles from './Input.module.scss'\nimport { InputItem } from './InputItem/InputItem'\nimport {setInputValue} from \"../../redux/actions/infoActions\";\n\nexport const Input = ({placeholder, inputValue, dispatch, films, isLoaded, rating}) => {\n    const changeInputValue = (e) => {\n        dispatch(setInputValue(e.target.value))\n    }\n\n    // next two code blocks is required because json-server can't provide necessary functional for rating queries\n    const filteredFilms = []\n    films.forEach(item => {\n        if(rating.length !== 0 && (rating.includes(Math.floor(item.rating)) || rating.includes(Math.floor(item.rating)))) {\n            filteredFilms.push(item)\n        }\n    })\n\n    let resultFilms\n    if(rating.includes('any')) {\n        resultFilms = films\n    } else if(filteredFilms.length > 0 && rating.length > 0 && isLoaded) {\n        resultFilms = filteredFilms\n    } else if (rating.length === 0 && isLoaded) {\n        resultFilms = films\n    } else {\n        resultFilms = []\n    }\n\n    return (\n        <div className={styles.input}>\n            <input\n                placeholder={placeholder}\n                value={inputValue}\n                onChange={changeInputValue}\n            />\n            <div className={styles.list}>\n                { isLoaded && resultFilms.length === 0 ?\n                    <p className={styles.text}>No results...</p> :\n                    !isLoaded ?\n                        <p className={styles.text}>Loading...</p> :\n                        resultFilms.map((item, index) => {\n                            return (\n                                <InputItem {...item} key={`${index}_${item.title}`} />\n                            )\n                        })\n                }\n            </div>\n        </div>\n    )\n}","import React from 'react'\nimport styles from './RatingMenu.module.scss'\nimport {useDispatch} from \"react-redux\";\nimport {setRating} from \"../../../redux/actions/infoActions\";\n\nconst array = [1,2,3,4,5,6,7,8,9,10]\n\nexport const RatingMenu = React.memo(({emptyStarIcon, fullStarIcon, rating}) => {\n\n    const dispatch = useDispatch()\n\n    const selectRating = (rating) => {\n        dispatch(setRating(rating))\n    }\n\n    return (\n        <div className={styles.menu}>\n            <div className={styles.checkbox}>\n                <input name='any' type=\"checkbox\" id='any' checked={rating.includes('any')} onChange={() => selectRating('any')} />\n                <label htmlFor='any' className={styles.any}>Any rating</label>\n            </div>\n            {\n                array.map((item, index) => {\n                    return (\n                        <div key={index} className={styles.checkbox}>\n                            <input name={index} type=\"checkbox\" id={index} checked={rating.includes(item)} onChange={() => selectRating(item)} />\n                            <label htmlFor={index}>\n                                {\n                                    Array(index + 1).fill(null).map((_, index) => {\n                                        return (\n                                            <div className={styles.star} key={index} >\n                                                <img src={fullStarIcon} alt='+' />\n                                            </div>\n                                        )\n                                    })\n                                }\n                                {\n                                    Array(10 - index - 1).fill(null).map((_, index) => {\n                                        return (\n                                            <div className={styles.star} key={index} >\n                                                <img src={emptyStarIcon} alt='-' />\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </label>\n                        </div>\n                    )\n                })\n            }\n        </div>\n    )\n})","import styles from './Rating.module.scss'\nimport arrowIcon from '../../assets/img/chevron-down.svg'\nimport { RatingMenu } from './RatingMenu/RatingMenu'\nimport emptyStarIcon from '../../assets/img/emptyStar.png'\nimport fullStarIcon from '../../assets/img/fullStar.png'\nimport {useEffect, useRef, useState} from \"react\";\n\nexport const Rating = ({rating}) => {\n    const [ratingVisibility, setRatingVisibility] = useState(false)\n\n    const genreMenuRef = useRef(null)\n\n    const handleClickOutside = (e) => {\n        const path = e.path || (e.composedPath && e.composedPath())\n        if(!path.includes(genreMenuRef.current)) {\n            setRatingVisibility(false)\n        }\n    }\n\n    const toggleVisibleMenu = () => {\n        setRatingVisibility(!ratingVisibility)\n    }\n\n    useEffect(() => {\n        window.addEventListener('click', handleClickOutside)\n        return () => {\n            window.removeEventListener('click', handleClickOutside)\n        }\n    }, [])\n\n    return (\n        <div\n            className={styles.rating}\n            ref={genreMenuRef}\n        >\n            <div\n                className={styles.topSide}\n                onClick={toggleVisibleMenu}\n            >\n                <span className={styles.title}>Rating</span>\n                <span className={styles.arrow}>\n                    <img src={arrowIcon} alt='arrow' />\n                </span>\n            </div>\n                { ratingVisibility &&\n                    <div className={styles.bottomSide}>\n                        <RatingMenu\n                            emptyStarIcon={emptyStarIcon}\n                            fullStarIcon={fullStarIcon}\n                            rating={rating}\n                        />\n                    </div>\n                }\n        </div>\n    )\n}","export const getFilms = (state) => {\n    return state.films\n}","export const getInfo = (state) => {\n    return state.info\n}","import axios from \"axios\";\n\nexport const filmsAPI = {\n    getFilms(value, genre) {\n        return axios.get(`/films?title_like=${value}${genre ? '&' + genre : ''}`).then(response => response.data)\n    }\n}","import {SET_FILMS, SET_IS_LOADED} from \"../types\";\nimport {filmsAPI} from \"../../api/api\";\n\nexport const setFilms = (array) => ({\n    type: SET_FILMS,\n    payload: array\n})\n\nexport const setIsLoaded = (value) => ({\n    type: SET_IS_LOADED,\n    payload: value\n})\n\nexport const fetchFilms = (inputValue, genre, rating) => {\n    return (dispatch) => {\n        dispatch(setIsLoaded(false))\n        filmsAPI.getFilms(inputValue, genre, rating).then(data => {\n            dispatch(setFilms(data))\n            dispatch(setIsLoaded(true))\n        })\n    }\n}","import { Genre } from '../Genre/Genre'\nimport { Input } from '../Input/Input'\nimport { Rating } from '../Rating/Rating'\nimport styles from './Form.module.scss'\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getFilms} from \"../../redux/selectors/filmsSelector\";\nimport {useCallback, useEffect} from \"react\";\nimport {getInfo} from \"../../redux/selectors/infoSelector\";\nimport {fetchFilms} from \"../../redux/actions/filmsActions\";\nimport {debounce} from \"../../helpers/debounce\";\n\nexport const Form = () => {\n    const {films, isLoaded} = useSelector(getFilms)\n    const {inputValue, genre, rating} = useSelector(getInfo)\n    const dispatch = useDispatch()\n\n    let generatedGenre = genre.includes('any') || genre.length === 0 ? null : 'category=' + genre.join('&category=')\n\n    //eslint-disable-next-line\n    const loadFilms = useCallback(\n        debounce((value, genre) => {\n            dispatch(fetchFilms(value, genre))\n        }, 500),\n        []\n    );\n\n    useEffect(() => {\n        if (inputValue.trim()) {\n            loadFilms(inputValue, generatedGenre)\n        }\n        //eslint-disable-next-line\n    }, [inputValue, generatedGenre, dispatch]);\n\n    return (\n        <div className={styles.wrapper}>\n            <form>\n                <Input\n                    placeholder=\"Enter movie name\"\n                    dispatch={dispatch}\n                    inputValue={inputValue}\n                    films={films}\n                    isLoaded={isLoaded}\n                    rating={rating}\n                />\n                <div className={styles.filters}>\n                    <Rating rating={rating} />\n                    <Genre genre={genre} />\n                </div>\n            </form>\n        </div>\n    )\n}","export const debounce = (func, wait, immediate) => {\n    let timeout;\n    return (...args) => {\n        const context = this;\n        const later = () => {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n        };\n        const callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) func.apply(context, args);\n    };\n}","import { Form } from \"./components/Form/Form\";\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <Form />\n    </div>\n  );\n}\n\nexport default App;\n","import {SET_FILMS, SET_IS_LOADED} from \"../types\";\n\nconst initialState = {\n    films: [],\n    isLoaded: true\n}\n\nexport const filmsReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case SET_FILMS:\n            return {\n                ...state,\n                films: action.payload\n            }\n        case SET_IS_LOADED:\n            return {\n                ...state,\n                isLoaded: action.payload\n            }\n        default:\n            return state\n    }\n}","import {SET_GENRE, SET_INPUT_VALUE, SET_RATING} from \"../types\";\n\nconst initialState = {\n    inputValue: '',\n    genre: [],\n    rating: []\n}\n\nexport const infoReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case SET_INPUT_VALUE:\n            return {\n                ...state,\n                inputValue: action.payload\n            }\n        case SET_GENRE:\n            let newGenre = [...state.genre]\n            if(newGenre.includes(action.payload)) {\n                newGenre = newGenre.filter(item => item !== action.payload)\n            } else {\n                newGenre.push(action.payload)\n            }\n            return {\n                ...state,\n                genre: [...newGenre]\n            }\n        case SET_RATING:\n            let newRating = [...state.rating]\n            if(newRating.includes(action.payload)) {\n                newRating = newRating.filter(item => item !== action.payload)\n            } else {\n                newRating.push(action.payload)\n            }\n            return {\n                ...state,\n                rating: [...newRating]\n            }\n        default:\n            return state\n    }\n}","import {createStore, applyMiddleware, combineReducers} from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from \"redux-thunk\";\nimport {filmsReducer} from \"./reducers/filmsReducer\";\nimport {infoReducer} from \"./reducers/infoReducer\";\n\nconst rootReducer = combineReducers({\n    films: filmsReducer,\n    info: infoReducer\n})\n\nexport const store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunk)))","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {Provider} from \"react-redux\";\nimport {store} from \"./redux/store\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"genre\":\"Genre_genre__7Fpb7\",\"topSide\":\"Genre_topSide__3QoGe\",\"title\":\"Genre_title__3xs2j\",\"arrow\":\"Genre_arrow__3aFqd\",\"bottomSide\":\"Genre_bottomSide__1HANQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"GenreMenu_menu__2IMSR\",\"checkbox\":\"GenreMenu_checkbox__SHswj\",\"any\":\"GenreMenu_any__2O2LV\",\"genre\":\"GenreMenu_genre__20jcO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rating\":\"Rating_rating__VdE1n\",\"topSide\":\"Rating_topSide__1gNg8\",\"title\":\"Rating_title__1efOq\",\"arrow\":\"Rating_arrow__1zrqD\",\"bottomSide\":\"Rating_bottomSide__1J23s\"};"],"sourceRoot":""}